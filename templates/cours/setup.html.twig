{% extends 'base.html.twig' %}

{% block title %}Configuration du cours - {{ cours.titre }}{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <style>
        .step-card {
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }
        .step-card:hover {
            border-color: #007bff;
            box-shadow: 0 4px 12px rgba(0, 123, 255, 0.15);
        }
        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
        }
        .progress-bar-custom {
            height: 10px;
            border-radius: 5px;
        }
    </style>
{% endblock %}

{% block body %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-10">
            <!-- En-tête -->
            <div class="card mb-4">
                <div class="card-body text-center">
                    <h1 class="text-success mb-3">
                        <i class="fas fa-check-circle"></i> Cours créé avec succès !
                    </h1>
                    <h2 class="text-primary">{{ cours.titre }}</h2>
                    <p class="text-muted">{{ cours.description }}</p>
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle"></i>
                        Maintenant, structurez votre cours en suivant ces étapes pour une expérience optimale.
                    </div>
                </div>
            </div>

            <!-- Progression -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-tasks"></i> Progression de la configuration
                    </h5>
                </div>
                <div class="card-body">
                    <div class="progress progress-bar-custom mb-3">
                        <div class="progress-bar bg-success" style="width: 25%"></div>
                    </div>
                    <small class="text-muted">1 sur 4 étapes complétées</small>
                </div>
            </div>

            <!-- Étapes de configuration -->
            <div class="row">
                <!-- Étape 1: Modules -->
                <div class="col-md-6 mb-4">
                    <div class="card step-card h-100">
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-3">
                                <div class="step-number bg-primary text-white">1</div>
                                <h5 class="mb-0">Créer des modules</h5>
                            </div>
                            <p class="text-muted">Organisez votre cours en modules thématiques pour structurer le contenu.</p>
                            <div class="mb-3">
                                <small class="text-success">
                                    <i class="fas fa-lightbulb"></i>
                                    <strong>Conseil :</strong> Un module = un grand thème (ex: "Introduction", "Théorie", "Pratique")
                                </small>
                            </div>
                            {% if cours.modules.count > 0 %}
                                <div class="alert alert-success">
                                    <i class="fas fa-check"></i> {{ cours.modules.count }} module(s) créé(s)
                                </div>
                                <a href="{{ path('app_module_new', {coursId: cours.id}) }}" class="btn btn-outline-primary">
                                    <i class="fas fa-plus"></i> Ajouter un module
                                </a>
                            {% else %}
                                <a href="{{ path('app_module_new', {coursId: cours.id}) }}" class="btn btn-primary">
                                    <i class="fas fa-plus"></i> Créer le premier module
                                </a>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Étape 2: Chapitres -->
                <div class="col-md-6 mb-4">
                    <div class="card step-card h-100">
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-3">
                                <div class="step-number {% if cours.modules.count > 0 %}bg-primary text-white{% else %}bg-secondary text-white{% endif %}">2</div>
                                <h5 class="mb-0">Ajouter des chapitres</h5>
                            </div>
                            <p class="text-muted">Créez des chapitres détaillés dans chaque module avec le contenu pédagogique.</p>
                            <div class="mb-3">
                                <small class="text-info">
                                    <i class="fas fa-info-circle"></i>
                                    <strong>Info :</strong> Disponible après avoir créé au moins un module
                                </small>
                            </div>
                            {% if cours.modules.count > 0 %}
                                {% set totalChapitres = 0 %}
                                {% for module in cours.modules %}
                                    {% set totalChapitres = totalChapitres + module.chapitres.count %}
                                {% endfor %}
                                
                                {% if totalChapitres > 0 %}
                                    <div class="alert alert-success">
                                        <i class="fas fa-check"></i> {{ totalChapitres }} chapitre(s) créé(s)
                                    </div>
                                {% endif %}
                                
                                <a href="{{ path('app_cours_show', {id: cours.id}) }}" class="btn {% if totalChapitres > 0 %}btn-outline-primary{% else %}btn-primary{% endif %}">
                                    <i class="fas fa-book-open"></i> {% if totalChapitres > 0 %}Gérer{% else %}Créer{% endif %} les chapitres
                                </a>
                            {% else %}
                                <button class="btn btn-secondary" disabled>
                                    <i class="fas fa-lock"></i> Créer des modules d'abord
                                </button>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Étape 3: Classes et étudiants -->
                <div class="col-md-6 mb-4">
                    <div class="card step-card h-100">
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-3">
                                <div class="step-number bg-warning text-white">3</div>
                                <h5 class="mb-0">Assigner à des classes</h5>
                            </div>
                            <p class="text-muted">Associez votre cours à des classes pour que les étudiants puissent y accéder.</p>
                            <div class="mb-3">
                                <small class="text-warning">
                                    <i class="fas fa-users"></i>
                                    <strong>Note :</strong> Cette action est généralement effectuée par l'administration
                                </small>
                            </div>
                            <a href="{{ path('enseignant_cours') }}" class="btn btn-outline-warning">
                                <i class="fas fa-eye"></i> Voir mes cours
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Étape 4: Planning -->
                <div class="col-md-6 mb-4">
                    <div class="card step-card h-100">
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-3">
                                <div class="step-number bg-info text-white">4</div>
                                <h5 class="mb-0">Planifier les séances</h5>
                            </div>
                            <p class="text-muted">Créez des événements dans le planning pour organiser vos cours et examens.</p>
                            <div class="mb-3">
                                <small class="text-info">
                                    <i class="fas fa-calendar"></i>
                                    <strong>Planification :</strong> Programmez vos séances de cours et évaluations
                                </small>
                            </div>
                            <a href="{{ path('enseignant_planning_cours', {id: cours.id}) }}" class="btn btn-outline-info">
                                <i class="fas fa-calendar-plus"></i> Gérer le planning
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Actions rapides -->
            <div class="card mt-4">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-bolt"></i> Actions rapides
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 mb-2">
                            <a href="{{ path('app_cours_show', {id: cours.id}) }}" class="btn btn-primary w-100">
                                <i class="fas fa-eye"></i> Voir le cours
                            </a>
                        </div>
                        <div class="col-md-3 mb-2">
                            <a href="{{ path('app_cours_edit', {id: cours.id}) }}" class="btn btn-outline-secondary w-100">
                                <i class="fas fa-edit"></i> Modifier
                            </a>
                        </div>
                        <div class="col-md-3 mb-2">
                            <a href="{{ path('enseignant_cours') }}" class="btn btn-outline-primary w-100">
                                <i class="fas fa-list"></i> Mes cours
                            </a>
                        </div>
                        <div class="col-md-3 mb-2">
                            <a href="{{ path('enseignant_dashboard') }}" class="btn btn-outline-success w-100">
                                <i class="fas fa-tachometer-alt"></i> Dashboard
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Guide rapide -->
            <div class="card mt-4">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-question-circle"></i> Guide rapide
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6><i class="fas fa-layer-group text-primary"></i> Structure recommandée :</h6>
                            <ul class="list-unstyled">
                                <li><strong>Cours</strong> → Conteneur principal</li>
                                <li>└── <strong>Modules</strong> → Grandes thématiques</li>
                                <li>&nbsp;&nbsp;&nbsp;&nbsp;└── <strong>Chapitres</strong> → Contenu détaillé</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6><i class="fas fa-clock text-info"></i> Ordre recommandé :</h6>
                            <ol>
                                <li>Créer les modules principaux</li>
                                <li>Ajouter les chapitres de chaque module</li>
                                <li>Programmer les séances</li>
                                <li>Inviter les étudiants</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
